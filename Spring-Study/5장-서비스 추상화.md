# **4주차 - 5장.서비스 추상화**

## **목차**
[1. 오류(에러)란?](#1.-오류(에러)란?)<br>
[2. 예외란?](#2.-예외란?)<br>
[3. Java에서의 오류와 예외](#3.-Java에서의-오류와-예외)<br>
[4. Checked Exception](#4.-Checked-Exception)<br>
[5. UnChecked Exception](#5.-UnChecked-Exception)<br>
[6. Exception Handling](#6.-Exception-Handling)<br>
<br>

## **1. 트랜잭션**
 - 여러 읽기/쓰기를 논리적으로 하나로 묶음
   - 순서 : 트랜잭션 시작 - 여러 쿼리 실행 - 커밋 또는 롤백
   - 모두 반영(커밋) or 모두 미반영(롤백)
 - 트랜잭션이 없다면 일련의 과정 수행시 데이터 일관성이 보장되지 않음
 - 트랜잭션의 범위 : 커넥션 기준 (중요!)
---
<br>

## **2. 트랜잭션 서비스 추상화**
 - 트랙잭션 : 더 이상 나눌 수 없는 단위의 작업
 - 트랜젹션이 성공하면 커밋
 - 트랜잭션 중간에 예외가 발생해 작업을 수행할 수 없다면 초기 상태로 롤백
 - 데이터베이스는 자체적으로 트랜잭션 제공
 - 트랜잭션은 Conncection 객체를 통해 시작과 종료 등 경계를 지정가능
---
<br>

## **3. 트랜잭션 동기화**
 - 트랜잭션을 시작하기 위해 만든 Connection 오브젝트를 특별한 저장소에 보관 후, 이를 가져다 사용
 - 트랜잭션 내 작업들이 완료되지 않으면 Connection을 계속 열어둠
 - 트랜잭션 내 다양한 작업들은 Connection을 꺼내서 사용
 - 트랜잭션 동기화 저장소는 작업 스레드마다 독립적으로 Connection 오브젝트를 저장 하고 관리하기에, 멀티스레드 환경에서도 충돌 안남
 ---
<br>

## **5. 트랜잭션 서비스 추상화**
 - 1개의 DB만 사용할 때는 로컬 트랜잭션은 하나의 DB Connection에 종속적
 - 여러개의 DB를 이용할 때는 DB와 독립적으로 만들어지는 Conncetion이 아닌 관리자를 사용하여 글로벌 트랜잭션 필요
 - 트랜잭션 매니저를 이용하여 여러 개의 DB가 참여할 수 있는 트랜잭션 생성 가능
 - 특정 DB에 종속되지 않도록 추상화를 사용하여 구체화된 트랜잭션을 생성
---
<br>

## **6. 서비스 추상화와 단일 책임 원칙**
 - 단일 책임 원칙 : 하나의 모듈은 한 가지 책임을 가져야 함
 - 단일 책임 원칙에 의하여 Transaction과 Service는 분리되어야 함
 - 단일 책임 원칙 적용시 장점
   1. 변경이 발생할 때 수정할 대상이 명확
   2. 기술이 변경되면 기술 계층과의 연동을 담당하는 기술 추상화 계층의 설정만 변경하면 됨
---
<br>

## **7. 트랜잭션 전파**
 - 여러 메서드 호출이 한 트랜잭션에 묶이도록 하기 위해 필요
 - EX) @Transactional : 메서드 간에 커넥션 객체를 전달하지 않아도 한 트랜잭션으로 묶어서 실행
---
<br>